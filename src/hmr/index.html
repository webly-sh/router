<script>
  function triggerHMRReload() {
    const socket = new WebSocket("ws://" + window.location.host + "/_hmr");

    socket.onopen = () => {
      console.log("HMR WebSocket connection established");
    };

    socket.onmessage = (event) => {
      console.log("HMR message received:", event.data);
      const data = event.data;
      if (data === "reload") {
        console.log("HMR reload triggered");
        window.location.reload();
      } else {
        console.log("HMR message received:", data);
      }
    };

    socket.onerror = (error) => {
      console.error("HMR WebSocket error:", error);
    };

    socket.onclose = () => {
      console.log("HMR WebSocket connection closed");
      // Attempt to reconnect after a short delay
      setTimeout(triggerHMRReload, 1000);
    };

    console.log("HMR reload function ready");
  }

  // Call the function to set up HMR reload
  triggerHMRReload();
</script>
